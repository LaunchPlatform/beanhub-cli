{"openapi": "3.1.0", "info": {"title": "BeanHub Internal API", "description": "The BeanHub API for public access but not published yet, so they are subject to changes. Please do not rely on it.", "version": "0.0.1"}, "paths": {"/v1/auth/sessions": {"post": {"tags": ["auth"], "summary": "Create auth session", "operationId": "create_auth_session", "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/AuthSessionRequest"}}}, "required": true}, "responses": {"201": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/AuthSessionResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/v1/auth/sessions/{auth_session_id}/poll": {"get": {"tags": ["auth"], "summary": "Poll auth session status", "operationId": "poll_auth_session", "parameters": [{"name": "auth_session_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Auth Session Id"}}, {"name": "secret_token", "in": "query", "required": true, "schema": {"type": "string", "title": "Secret Token"}}], "responses": {"200": {"description": "Auth session is ready", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/AuthSessionPollResponse"}, "example": {"token": "5308cd91-d7d7-488c-b9a9-ed984f58c01b", "repositories": ["username/repo"]}}}}, "202": {"description": "Not granted yet, please try again later", "content": {"application/json": {"example": {"code": "try_again", "message": "still waiting for auth"}, "schema": {"$ref": "#/components/schemas/AuthSessionNotReadyResponse"}}}}, "404": {"description": "Auth session not found", "content": {"application/json": {"example": {"detail": "Auth session not found"}, "schema": {"$ref": "#/components/schemas/GenericError"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/v1/repos/{username}/{repo_name}/connect/sync_batches": {"post": {"tags": ["connect"], "summary": "Create a sync batch", "operationId": "create_sync_batch", "security": [{"APIKeyHeader": []}], "parameters": [{"name": "username", "in": "path", "required": true, "schema": {"type": "string", "title": "Username"}}, {"name": "repo_name", "in": "path", "required": true, "schema": {"type": "string", "title": "Repo Name"}}], "responses": {"201": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/CreateSyncBatchResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/v1/repos/{username}/{repo_name}/connect/sync_batches/{sync_batch_id}": {"get": {"tags": ["connect"], "summary": "Get a sync batch", "operationId": "get_sync_batch", "security": [{"APIKeyHeader": []}], "parameters": [{"name": "sync_batch_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Sync Batch Id"}}, {"name": "username", "in": "path", "required": true, "schema": {"type": "string", "title": "Username"}}, {"name": "repo_name", "in": "path", "required": true, "schema": {"type": "string", "title": "Repo Name"}}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/GetSyncBatchResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/v1/repos/{username}/{repo_name}/connect/dumps": {"post": {"tags": ["connect"], "summary": "Create a dump request", "operationId": "create_dump_request", "security": [{"APIKeyHeader": []}], "parameters": [{"name": "username", "in": "path", "required": true, "schema": {"type": "string", "title": "Username"}}, {"name": "repo_name", "in": "path", "required": true, "schema": {"type": "string", "title": "Repo Name"}}], "requestBody": {"required": true, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/CreateDumpRequestRequest"}}}}, "responses": {"201": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/CreateDumpRequestResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/v1/repos/{username}/{repo_name}/connect/dumps/{dump_request_id}": {"get": {"tags": ["connect"], "summary": "Get a dump request", "operationId": "get_dump_request", "security": [{"APIKeyHeader": []}], "parameters": [{"name": "dump_request_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Dump Request Id"}}, {"name": "username", "in": "path", "required": true, "schema": {"type": "string", "title": "Username"}}, {"name": "repo_name", "in": "path", "required": true, "schema": {"type": "string", "title": "Repo Name"}}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/GetDumpRequestResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/v1/repos/{username}/{repo_name}/inbox/emails": {"get": {"tags": ["inbox"], "summary": "Get inbox emails", "operationId": "get_inbox_emails", "security": [{"APIKeyHeader": []}], "parameters": [{"name": "username", "in": "path", "required": true, "schema": {"type": "string", "title": "Username"}}, {"name": "repo_name", "in": "path", "required": true, "schema": {"type": "string", "title": "Repo Name"}}, {"name": "cursor", "in": "query", "required": false, "schema": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Cursor"}}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/GetInboxEmailResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/v1/repos/{username}/{repo_name}/inbox/dumps": {"post": {"tags": ["inbox"], "summary": "Create an inbox dump request", "operationId": "create_inbox_dump_request", "security": [{"APIKeyHeader": []}], "parameters": [{"name": "username", "in": "path", "required": true, "schema": {"type": "string", "title": "Username"}}, {"name": "repo_name", "in": "path", "required": true, "schema": {"type": "string", "title": "Repo Name"}}], "requestBody": {"required": true, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/CreateInboxDumpRequest"}}}}, "responses": {"201": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/CreateInboxDumpRequestResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/v1/repos/{username}/{repo_name}/inbox/dumps/{dump_request_id}": {"get": {"tags": ["inbox"], "summary": "Get an inbox dump request", "operationId": "get_inbox_dump_request", "security": [{"APIKeyHeader": []}], "parameters": [{"name": "dump_request_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Dump Request Id"}}, {"name": "username", "in": "path", "required": true, "schema": {"type": "string", "title": "Username"}}, {"name": "repo_name", "in": "path", "required": true, "schema": {"type": "string", "title": "Repo Name"}}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/GetInboxDumpRequestResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/v1/repositories": {"get": {"tags": ["repo"], "summary": "List repositories", "operationId": "list_repo", "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ListRepositoriesResponse"}}}}}, "security": [{"APIKeyHeader": []}]}}}, "components": {"schemas": {"AuthSessionNotReadyResponse": {"properties": {"code": {"type": "string", "title": "Code"}, "message": {"type": "string", "title": "Message"}}, "type": "object", "required": ["code", "message"], "title": "AuthSessionNotReadyResponse"}, "AuthSessionPollResponse": {"properties": {"token": {"type": "string", "title": "Token"}, "repositories": {"anyOf": [{"items": {"type": "string"}, "type": "array"}, {"type": "null"}], "title": "Repositories", "deprecated": true}}, "type": "object", "required": ["token"], "title": "AuthSessionPollResponse"}, "AuthSessionRequest": {"properties": {"hostname": {"type": "string", "title": "Hostname"}}, "type": "object", "required": ["hostname"], "title": "AuthSessionRequest"}, "AuthSessionResponse": {"properties": {"id": {"type": "string", "format": "uuid", "title": "Id"}, "code": {"type": "string", "title": "Code"}, "auth_url": {"type": "string", "title": "Auth Url"}, "secret_token": {"type": "string", "title": "Secret Token"}, "poll_url": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Poll Url", "deprecated": true}}, "type": "object", "required": ["id", "code", "auth_url", "secret_token"], "title": "AuthSessionResponse"}, "CreateDumpRequestRequest": {"properties": {"public_key": {"type": "string", "title": "Public Key"}, "output_accounts": {"type": "boolean", "title": "Output Accounts", "default": false}}, "type": "object", "required": ["public_key"], "title": "CreateDumpRequestRequest"}, "CreateDumpRequestResponse": {"properties": {"id": {"type": "string", "format": "uuid", "title": "Id"}}, "type": "object", "required": ["id"], "title": "CreateDumpRequestResponse"}, "CreateInboxDumpRequest": {"properties": {"public_key": {"type": "string", "title": "Public Key"}, "email_ids": {"items": {"type": "string"}, "type": "array", "title": "Email Ids"}}, "type": "object", "required": ["public_key", "email_ids"], "title": "CreateInboxDumpRequest"}, "CreateInboxDumpRequestResponse": {"properties": {"id": {"type": "string", "format": "uuid", "title": "Id"}}, "type": "object", "required": ["id"], "title": "CreateInboxDumpRequestResponse"}, "CreateSyncBatchResponse": {"properties": {"id": {"type": "string", "format": "uuid", "title": "Id"}}, "type": "object", "required": ["id"], "title": "CreateSyncBatchResponse"}, "DumpRequestState": {"type": "string", "enum": ["PENDING", "PROCESSING", "COMPLETE", "FAILED"], "title": "DumpRequestState"}, "GenericError": {"properties": {"detail": {"title": "Detail"}}, "type": "object", "title": "GenericError"}, "GetDumpRequestResponse": {"properties": {"id": {"type": "string", "format": "uuid", "title": "Id"}, "state": {"$ref": "#/components/schemas/DumpRequestState"}, "encryption_key": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Encryption Key"}, "download_url": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Download Url"}, "accounts_download_url": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Accounts Download Url"}, "error_message": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Error Message"}}, "type": "object", "required": ["id", "state"], "title": "GetDumpRequestResponse"}, "GetInboxDumpRequestResponse": {"properties": {"id": {"type": "string", "format": "uuid", "title": "Id"}, "state": {"$ref": "#/components/schemas/InboxDumpRequestState"}, "encryption_key": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Encryption Key"}, "download_url": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Download Url"}, "error_message": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Error Message"}}, "type": "object", "required": ["id", "state"], "title": "GetInboxDumpRequestResponse"}, "GetInboxEmailResponse": {"properties": {"emails": {"items": {"$ref": "#/components/schemas/InboxEmail"}, "type": "array", "title": "Emails"}, "cursor": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Cursor"}}, "type": "object", "required": ["emails"], "title": "GetInboxEmailResponse"}, "GetSyncBatchResponse": {"properties": {"id": {"type": "string", "format": "uuid", "title": "Id"}, "syncs": {"items": {"$ref": "#/components/schemas/SyncData"}, "type": "array", "title": "Syncs"}}, "type": "object", "required": ["id", "syncs"], "title": "GetSyncBatchResponse"}, "HTTPValidationError": {"properties": {"detail": {"items": {"$ref": "#/components/schemas/ValidationError"}, "type": "array", "title": "Detail"}}, "type": "object", "title": "HTTPValidationError"}, "InboxDumpRequestState": {"type": "string", "enum": ["PENDING", "PROCESSING", "COMPLETE", "FAILED"], "title": "InboxDumpRequestState"}, "InboxEmail": {"properties": {"id": {"type": "string", "title": "Id"}, "message_id": {"type": "string", "title": "Message Id"}, "headers": {"additionalProperties": {"type": "string"}, "type": "object", "title": "Headers"}, "subject": {"type": "string", "title": "Subject"}, "from_addresses": {"items": {"type": "string"}, "type": "array", "title": "From Addresses"}, "recipients": {"items": {"type": "string"}, "type": "array", "title": "Recipients"}, "tags": {"anyOf": [{"items": {"type": "string"}, "type": "array"}, {"type": "null"}], "title": "Tags"}}, "type": "object", "required": ["id", "message_id", "headers", "subject", "from_addresses", "recipients"], "title": "InboxEmail"}, "ItemData": {"properties": {"id": {"type": "string", "title": "Id"}, "institution_name": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Institution Name"}}, "type": "object", "required": ["id", "institution_name"], "title": "ItemData"}, "ListRepositoriesResponse": {"properties": {"repositories": {"items": {"$ref": "#/components/schemas/Repository"}, "type": "array", "title": "Repositories"}}, "type": "object", "required": ["repositories"], "title": "ListRepositoriesResponse"}, "PlaidItemSyncState": {"type": "string", "enum": ["PENDING", "PROCESSING", "SYNC_COMPLETE", "SYNC_FAILED", "IMPORT_COMPLETE", "IMPORT_COMPLETE_NO_CHANGES", "IMPORT_FAILED"], "title": "PlaidItemSyncState"}, "Repository": {"properties": {"username": {"type": "string", "title": "Username"}, "name": {"type": "string", "title": "Name"}, "type": {"$ref": "#/components/schemas/RepositoryType"}, "public": {"type": "boolean", "title": "Public"}, "active": {"type": "boolean", "title": "Active"}}, "type": "object", "required": ["username", "name", "type", "public", "active"], "title": "Repository"}, "RepositoryType": {"type": "string", "enum": ["GIT", "CONNECT"], "title": "RepositoryType"}, "SyncData": {"properties": {"id": {"type": "string", "title": "Id"}, "state": {"$ref": "#/components/schemas/PlaidItemSyncState"}, "error_message": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Error Message"}, "item": {"$ref": "#/components/schemas/ItemData"}}, "type": "object", "required": ["id", "state", "item"], "title": "SyncData"}, "ValidationError": {"properties": {"loc": {"items": {"anyOf": [{"type": "string"}, {"type": "integer"}]}, "type": "array", "title": "Location"}, "msg": {"type": "string", "title": "Message"}, "type": {"type": "string", "title": "Error Type"}}, "type": "object", "required": ["loc", "msg", "type"], "title": "ValidationError"}}, "securitySchemes": {"APIKeyHeader": {"type": "apiKey", "in": "header", "name": "access-token"}}}}